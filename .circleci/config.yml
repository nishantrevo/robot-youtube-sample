version: 2.1

orbs:
  python: circleci/python@1.3.4
  browser-tools: circleci/browser-tools@1.1.0

jobs:
  build-test:
    docker:
        - image: cimg/python:3.9.0-browsers
    steps:
      - checkout
      - python/install-packages
      - browser-tools/install-chrome
      - run:
          name: Run tests chrome
          command: | 
              robot --outputdir reports --xunit xunit/output.xml --variablefile resources/variables.yaml tests/
      - store_test_results:
          path: reports/xunit
      - store_artifacts:
          path: reports
          destination:  reports

workflows:
  main:
    jobs:
      - build-test
